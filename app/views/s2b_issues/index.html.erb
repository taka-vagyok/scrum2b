<% content_for :header_tags do %>
  <%= stylesheet_link_tag 'version', :plugin => 'scrum2b' %>
  <%= stylesheet_link_tag 'application', :plugin => 'scrum2b' %>
  <%= javascript_include_tag "application", :plugin => 'scrum2b' %>
  <%= javascript_include_tag "jquery-ui", :plugin => 'scrum2b' %>
  <%= javascript_include_tag "angular", :plugin => 'scrum2b' %>
<% end %>
<link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">

<%= render :partial => "s2b_issues/angular" %>

<div ng-app="scrum2b" >
  <div class="content full_mode" ng-controller="BoardsCtrl">

    <div class="filter" >
      <div class="filter_left">
        <h3>Scrum2B Tool Demo prototype</h3>
        <p>(Desktop suppork only)</p>
      </div>

	    <div class="filter_right">
	      <ul >
	        <li>
	          <select>
	            <option ng-repeat="version in versions" value="{{ version.id }}">{{ version.name }}</option>
	          </select>
	        </li>
	        <li>
	          <select name="select_member" id="select_member">
	            <option value="all" ><%= l(:label_select_all_member)%></option>
	            <% if User.current.logged? %>
	             <option value="me" <% if session[:params_select_member] && session[:params_select_member] == "me" %><%= selected="selected" %><% end %>><%= l(:label_select_me)%></option>
	            <% end %>
	            <option ng-repeat="member in members" value=" {{ member.id }}">{{ member.firstname }}</option>
	          </select>
	        </li>
	        <li>
	        	<input type="button" value="Filter">
	        </li>
	      </ul>
	    </div>
	  </div> <!--end filter-->
	  <span class="icon_backlog">Backlog<i class="fa fa-angle-right fa-lg"></i></span>
	  
	  <!-- Backlog -->
	  <%= render :partial => "s2b_issues/backlog" %>
	  <!--begin 4 sprint-->
	  <div id="accordion" class="sprint_total">
  	  <%= render :partial => "s2b_issues/sprint" %>
    </div><!--accordion-->
  </div><!--end content-->
</div>

<script>
  
  $("body").on('click', '.icon_add_issue', function(){
    $(this).parent().parent().find('.add_new_issue').show();
  });
  
  $("body").on('click', '.cancel_issue',function(){
    $(this).parent().parent().parent().parent().parent().parent().hide();
  });

  $("body").on('click', document , function(e){
    $('.setting').hide();
    e.stopPropagation();
  });

  $("body").on('click', '.setting' , function(e){
    $(this).show();
  });

  $("body").on('click', '.icon_config' , function(e){
    $('.setting').hide();
    $(this).parent().parent().find(".setting").toggle();
    e.stopPropagation();
  });
  
  $("body").on('click', '.edit_issue', function(){
    $(this).parent().parent().parent().parent().parent().find( ".from_edit_issue " ).show();
    $(this).parent().parent().parent().parent().hide();
  });


</script>